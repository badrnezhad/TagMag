function TagMag(e, t, a) { var n = document.getElementById(e); if (n) { var s = "<canvas id='myCanvas_" + n.id + "' width='{{width}}' height='{{height}}'></canvas>"; null != a && "" != a && "null" != a && (s += "<span id='myText_" + n.id + "' class='canvas-balloon'>" + a + "</span>"); var o = n.offsetWidth, i = n.offsetHeight, d = n.offsetLeft, f = n.offsetTop; s = (s = s.replace("{{width}}", o)).replace("{{height}}", i), $(n).parent().append(s); var l = document.getElementById("myCanvas_" + n.id); $(l).css({ position: "absolute", left: d, top: f, display: "none" }); var h = l.getContext("2d"); h.rect(t.x, t.y, t.w, t.h), h.stroke(); var c = document.getElementById("myText_" + n.id), p = f + t.y + t.h; p + c.offsetHeight > f + i && (p = f + t.h), $(c).css({ position: "absolute", left: d + t.x, top: p, display: "none", width: t.w }), $(n).mouseenter(function () { $(l).fadeIn("fast"), $(c).fadeIn("slow") }), $(l).mouseleave(function () { $(l).fadeOut("slow"), $(c).fadeOut("fast") }) } }